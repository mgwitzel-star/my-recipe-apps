<!DOCTYPE html>
<html>
<head>
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Recipe Fix</title>
    <style>
        body { font-family: sans-serif; padding: 20px; background: #eee; }
        .card { background: white; padding: 15px; border-radius: 10px; margin-bottom: 20px; box-shadow: 0 2px 5px rgba(0,0,0,0.1); }
        input, textarea { width: 100%; margin: 5px 0 15px 0; padding: 10px; box-sizing: border-box; border: 1px solid #ccc; border-radius: 5px; }
        button { width: 100%; padding: 12px; background: #2ecc71; color: white; border: none; border-radius: 5px; font-weight: bold; cursor: pointer; }
        .recipe { border-bottom: 1px solid #ddd; padding: 10px 0; }
    </style>
</head>
<body>

<div class="card">
    <h2>Add Recipe</h2>
    <input type="text" id="name" placeholder="Recipe Name (Required)">
    <textarea id="ings" placeholder="Ingredients (e.g. 1 cup Milk)"></textarea>
    <textarea id="steps" placeholder="Instructions..."></textarea>
    <button onclick="save()">Save Recipe</button>
</div>

<div class="card">
    <h2>My Recipes</h2>
    <div id="list"></div>
</div>

<script>
    // Load data
    let recipes = [];
    try {
        const saved = localStorage.getItem('myRecipes');
        if (saved) recipes = JSON.parse(saved);
    } catch (e) {
        console.error("Error loading recipes", e);
    }

    function save() {
        const nameInput = document.getElementById('name');
        const ingsInput = document.getElementById('ings');
        const stepsInput = document.getElementById('steps');

        if (!nameInput.value) {
            alert("Please enter a name!");
            return;
        }

        const newRecipe = {
            id: Date.now(),
            name: nameInput.value,
            ingredients: ingsInput.value,
            instructions: stepsInput.value
        };

        try {
            recipes.push(newRecipe);
            localStorage.setItem('myRecipes', JSON.stringify(recipes));
            
            // Clear inputs
            nameInput.value = '';
            ingsInput.value = '';
            stepsInput.value = '';
            
            render();
            alert("Saved successfully!");
        } catch (err) {
            alert("Save failed: " + err);
        }
    }

    function deleteRec(id) {
        recipes = recipes.filter(r => r.id !== id);
        localStorage.setItem('myRecipes', JSON.stringify(recipes));
        render();
    }

    function render() {
        const container = document.getElementById('list');
        container.innerHTML = '';
        recipes.forEach(r => {
            container.innerHTML += `
                <div class="recipe">
                    <strong>${r.name}</strong><br>
                    <small>${r.ingredients.substring(0, 30)}...</small>
                    <button style="background:red; width:auto; padding: 2px 8px; margin-left: 10px;" onclick="deleteRec(${r.id})">Delete</button>
                </div>
            `;
        });
    }

    render();
</script>
</body>
</html>
