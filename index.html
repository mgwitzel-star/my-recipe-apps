// Add this new helper function inside your <script> tag
function fractionToDecimal(str) {
    if (str.includes('/')) {
        const parts = str.split('/');
        return parseFloat(parts[0]) / parseFloat(parts[1]);
    }
    return parseFloat(str);
}

// And update the scaleIngredient function to use it
function scaleIngredient(text, factor) {
    // This regex now looks for fractions like 1/2 or 3/4
    const regex = /(\d+(?:\/\d+)?(?:\.\d+)?)\s*(tsp|tbsp|cup|cups|oz|lb|lbs|g|ml)\b/gi;
    
    return text.replace(regex, (match, val, unit) => {
        let decimalValue = fractionToDecimal(val);
        let total = decimalValue * factor;
        unit = unit.toLowerCase();

        // Standard conversions
        if (unit === "tsp" && total >= 3) { total /= 3; unit = "tbsp"; }
        if (unit === "tbsp" && total >= 16) { total /= 16; unit = "cups"; }
        
        return `${+total.toFixed(2)} ${unit}`;
    });
}
